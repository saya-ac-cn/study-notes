### Spring Cloud面试汇总

#### 1.什么是Spring Cloud？

Spring Cloud是分布式微服务架构下的一站式解决方案，是各个微服务架构落地的集合，俗称微服务全家桶

#### 2.Spring Boot和Spring Cloud的关系？

Spring Boot专注于快速开发单个个体微服务

Spring Cloud专注整个微服务直接的协调管理

#### 3.spring cloud 的核心组件有哪些？

- Eureka：服务注册于发现。
- Feign：基于动态代理机制，根据注解和选择的机器，拼接请求 url 地址，发起请求。
- Ribbon：提供了基于客户端的负载均衡实例。
- Hystrix：熔断器，提供服务降级、限流和熔断。
- Zuul：服务网关，主要提供了对请求的路由和过滤功能。路由功能负责将外部访问请求转发到具体的微服务实例上。

#### 4.Spring cloud 断路器的作用是什么？

在分布式架构中，接口之间调用难免会出现调用失败。比如：超时，异常等，这时就需要一个兜底的方案，一旦调用发生错误，断路器就会向保险丝那样熔断，向调用者返回一个符合预期，合理的响应。

#### 5.Spring Cloud和Dubbo区别?

Spring Cloud和Dubbo都是现在主流的微服务架构，随着近年阿里重启Dubbo项目后，两者的差别主要体现在通信方式上，一个采用远程过程调用，一个采用Http。

#### 6. 微服务之间是如何独立通讯的?

远程过程调用

Http RestFull

#### 7.什么是Spring Cloud Config?

在分布式系统中，由于服务数量巨多，为了方便服务配置文件统一管理，实时更新，所以需要统一进行配置管理。常用的有携程的Apollo

####  8.什么是Spring Cloud Bus?

Spring Cloud Bus 将分布式的节点用轻量的消息代理连接起来，它可以用于广播配置文件的更改或者服务直接的通讯，也可用于监控。
如果修改了配置文件，发送一次请求，所有的客户端便会重新读取配置文件。

#### 9.Eureka和ZooKeeper都可以提供服务注册与发现的功能,请说说两个的区别？

1. ZooKeeper保证的是CP,Eureka保证的是AP。ZooKeeper在选举期间注册服务瘫痪,虽然服务最终会恢复,但是选举期间不可用的
2. ZooKeeper有Leader和Follower角色,Eureka各个节点平等
3. ZooKeeper采用过半数存活原则,Eureka采用自我保护机制解决分区问题

#### 10. Eureka自我保护机制是什么?

当Eureka Server 节点在短时间内没有收到实例的心跳连接时（比如网络故障或频繁启动关闭客户端）节点会进入自我保护模式，保护注册信息，故障恢复时，自动退出自我保护模式。

#### 11.什么是Ribbon？

ribbon是一个基于负载均衡客户端，可以很好的控制http和tcp的一些行为。feign默认集成了ribbon。

#### 12.什么是feigin？它的优点是什么？

1. feign整合了ribbon，具有负载均衡的能力
2. feign采用的是基于接口的注解
3. 整合了Hystrix，具有熔断的能力

#### 13.Ribbon和Feign的区别？

1. 都是调用其他服务的，但方式不同。
2. 启动类注解不同，Ribbon是@RibbonClient feign的是@EnableFeignClients
3. 调用方式不同，Ribbon需要自己构建http请求，模拟http请求然后使用RestTemplate发送给其他服务，步骤相当繁琐。Feign需要将调用的方法定义成抽象方法即可。

#### 14.什么是服务熔断？什么是服务降级?

服务直接的调用，比如在高并发情况下出现进程阻塞，导致当前线程不可用，慢慢的全部线程阻塞，导致服务器雪崩。
服务熔断：相当于保险丝，出现某个异常，直接熔断整个服务，而不是一直等到服务超时。通过维护一个自己的线程池，当线程到达阈值的时候就启动服务降级，如果其他请求继续访问就直接返回fallback的默认值。

#### 15.REST 和RPC对比

1.RPC主要的缺陷是服务提供方和调用方式之间的依赖太强，需要对每一个微服务进行接口的定义，并通过持续继承发布，严格版本控制才不会出现冲突。
2.REST是轻量级的接口，服务的提供和调用不存在代码之间的耦合，只需要一个约定进行规范。

#### 16.什么是微服务？

1. 微服务是一种架构模式或是一种架构风格，它提倡的是将单一的应用程序划分成若干个小的服务，每个服务都有独立的进程，服务之间相互协调，相互配合，最终完成目的。
2. 服务之间采用轻量级的通信机制，通常是基于HTTP的TESTful API。
3. 每个服务都围绕着具体业务进行构建，并且能够被独立地部署到生产环境、类生产环境等

#### 17.服务注册和发现？

服务注册，简单的说，就是客户端将自己的实例信息（ip和接口方法等）注册到注册中心

服务发现，简单的说，就是消费者去注册中心上查询注册了哪些服务，服务有多少个实例，哪些是健康的，哪些是不可用的